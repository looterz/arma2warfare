class FSM{fsmName="WF_HQ";class States{class React{name="React";init="if(isNil ""BIS_DEBUG_DIALOG"")then{}else{debugLog format[""DIALOG- FSM of %1 initiated by %2 sentenceId %3 sentence %4"",_this,_from,_sentenceId,localize(""STR_""+""_sentenceId"")]};";precondition="";class Links{class Come_on__come{priority=1.000000;to="___Nervous_anim";precondition="";condition="(_sentenceId in[""Cooper_ComeOnWithMe""]);";action="";};class ___Interrupted_{priority=1.000000;to="Come_on__come";precondition="";condition="(_sentenceId in[""Interrupted""]);";action="";};class __{priority=0.000000;to="END";precondition="";condition="true";action="";};};};class END{name="END";init="";precondition="";class Links{};};class ___Nervous_anim{name="___Nervous_anim";init="_this doWatch _from;DEBUGLOG ""CooperGalkinaScene.fsm: START-----------------------------------"";DEBUGLOG ""Galkina is NERVOUS and ESCAPING"";_t=time;[]spawn{_nic=[objNull,BIS_civWoman,rPLAYMOVENOW,""Cwmn_GalkinaLiesNervousThenRun""]call RE;DEBUGLOG ""sceneGalkina.sqf: Animation: Cwmn_GalkinaLiesNervousThenRun"";_BIS_civWomanDone=BIS_civWoman addEventHandler[""AnimDone"",{_nic=[objNull,BIS_civWoman,rPLAYMOVENOW,""AmovPercMrunSnonWnonDf""]call RE;_womanDir=(getDir BIS_civWoman)-180;BIS_civWoman setdir _womanDir;_GalkinaEscapePoints=[""BIS_civWomanPositionEnd2a"",""BIS_civWomanPositionEnd2b"",""BIS_civWomanPositionEnd2c""];_GalkinaSelectedPoint=_GalkinaEscapePoints select floor(random(count _GalkinaEscapePoints));DEBUGLOG format[""grpCIVWoman.fsm: Galkina ESCAPING on random point: %1"",_GalkinaSelectedPoint];_trgGalkinaEnd2=createTrigger[""EmptyDetector"",getMarkerPos _GalkinaSelectedPoint];_trgGalkinaEnd2 setTriggerArea[5,5,0,false];_trgGalkinaEnd2 setTriggerActivation[""MEMBER"",""PRESENT"",true];_trgGalkinaEnd2 triggerAttachVehicle[BIS_civWoman];_trgGalkinaEnd2 setTriggerStatements[""this"",""DEBUGLOG """"grpCIVWoman.fsm: Galkina reached her end position"""";BIS_civWoman setUnitPos """"DOWN""""; "",""""];BIS_civWoman doMove getMarkerPos _GalkinaSelectedPoint;BIS_civWoman forceSpeed 15;BIS_civWoman removeEventHandler[""animDone"",0]}];sleep 7;_nic=[objNull,BIS_civWoman,rKBTELL,BIS_cooper,""CooperGalkinaScene"",""Galkina_NoNoMore""]call RE};";precondition="";class Links{};};class Come_on__come{name="Come_on__come";init="_nic=[objNull,_from,rKBTELL,_this,_topic,""Cooper_ComeOnWithMe""]call RE;_this doWatch _from;DEBUGLOG ""CooperGalkinaScene.fsm: START-----------------------------------"";";precondition="";class Links{};};};initState="React";finalStates[]={"END","___Nervous_anim","Come_on__come"};};